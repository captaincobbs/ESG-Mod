<?xml version="1.0" encoding="utf-8" ?>
<Datatable xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xsi:noNamespaceSchemaLocation="../Schemas/ScienceConstructibleElement.xsd">
  <!-- Not an actual tech, just a prerequisite for things that should be disabled -->
  <TechnologyDefinition Name="TechnologyDefinitionUnlockable" Category="CategoryTechnologyQuest" Visibility="Hidden">
    <CustomCost ResourceName="EmpireResearch">0</CustomCost>
    <PathPrerequisite Flags="DiplomaticTradable">false</PathPrerequisite>
  </TechnologyDefinition>
  <!-- Terraformation 1 -->
  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration9" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration5To9'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyColonization8"/>
    <SimulationDescriptorReference Name="TechnologyLinkColonization8Common"/>
    <SimulationDescriptorReference Name="TechnologyCuriosityLevel2"/>
    <SimulationDescriptorReference Name="TechnologyTerraformation1"/>
    <SimulationDescriptorReference Name="TechnologyTerraformation1TimeLords"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

    <HelperVariable Name="AvailableDesertPlanets"/>
    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>$(AvailableDesertPlanets) *  1.5+ $(TurnVariable) * 20</HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration9Unfallen" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration5To9'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyUnfallen" Inverted="false">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyColonization8Unfallen"/>
    <SimulationDescriptorReference Name="TechnologyCuriosityLevel2"/>
    <SimulationDescriptorReference Name="TechnologyTerraformation1"/>
    <SimulationDescriptorReference Name="TechnologyTerraformation1TimeLords"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

    <HelperVariable Name="AvailableDesertPlanets"/>
    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>$(AvailableDesertPlanets) *  1.5+ $(TurnVariable) * 20</HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration9TimeLords" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration5To9'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyTimeLords" Inverted="false">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyTerraformation1TimeLords"/>
    <SimulationDescriptorReference Name="TechnologyTerraformation1"/>
    <SimulationDescriptorReference Name="TechnologyCuriosityLevel2"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

    <HelperVariable Name="AvailableMixedAnomaly"/>
    <HelperVariable Name="FoodPopulation"/>
    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>25 * $(TurnVariable) + 10 * $(FoodPopulation) + 10 * $(AvailableMixedAnomaly) </HelperFormula>
  </TechnologyDefinition>
  
  <!-- Terraformation 2 -->
  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration31TimeLords" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyTimeLords" Inverted="false">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyTerraformation2TimeLords"/>
    <SimulationDescriptorReference Name="TechnologyTerraformation2"/>
    <SimulationDescriptorReference Name="TechnologyScience6"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

    <HelperVariable Name="SciencePopulation"/>
    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>20 * $(TurnVariable) + $(SciencePopulation) * 10</HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration31" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyTerraformation2"/>
    <SimulationDescriptorReference Name="TechnologyTerraformation2TimeLords"/>
    <SimulationDescriptorReference Name="TechnologyScience6"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

    <HelperVariable Name="SciencePopulation"/>
    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>20 * $(TurnVariable) + $(SciencePopulation) * 10</HelperFormula>
  </TechnologyDefinition>

  <!-- Remove Expanded Explorer Slots from T4 food tech -->
  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration17" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration9To15'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyFood6"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventReligiousTechnology"/>
    <HelperVariable Name="FoodPercent"/>
    <HelperVariable Name="OwnedPlanetsCount"/>
    <HelperVariable Name="FoodVariable"/>
    <HelperFormula> $(FoodPercent) * 10 + $(FoodVariable) * $(OwnedPlanetsCount) </HelperFormula>
  </TechnologyDefinition>

  <!-- Add Expanded Explorer Slots to Machine Bacteria -->
  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration25" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration1To25'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyColonization3"/>
    <SimulationDescriptorReference Name="TechnologyColonization3Vaulters"/>
    <SimulationDescriptorReference Name="TechnologyColonization3VaultersNoPortals"/>
    <SimulationDescriptorReference Name="TechnologyColonization3VaultersNoVaultersPopulation"/>
    <SimulationDescriptorReference Name="TechnologyExplorationModule1"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <SimulationDescriptorReference Name="TechnologyImproveExplorerHullSophons"/>
    <SimulationDescriptorReference Name="TechnologyImproveExplorerHullCravers"/>
    <SimulationDescriptorReference Name="TechnologyImproveExplorerHullMajorHisshos"/>
    <SimulationDescriptorReference Name="TechnologyImproveExplorerHullLumeris"/>
    <SimulationDescriptorReference Name="TechnologyImproveExplorerHullUnitedEmpire"/>
    <SimulationDescriptorReference Name="TechnologyImproveExplorerHullHoratios"/>
    <SimulationDescriptorReference Name="TechnologyImproveExplorerHullUmbralChoir"/>
    <SimulationDescriptorReference Name="TechnologyImproveExplorerHullVaulters"/>
    <SimulationDescriptorReference Name="TechnologyImproveExplorerHullTemplars"/>
    <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>
    <HelperVariable Name="AvailableSteppesPlanets"/>
    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>$(AvailableSteppesPlanets) * 1 + $(TurnVariable) * 40</HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration25TimeLords" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration1To25'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyTimeLords" Inverted="false">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyColonization3TimeLords"/>
    <SimulationDescriptorReference Name="TechnologyExplorationModule1"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <SimulationDescriptorReference Name="TechnologyImproveExplorerHullTimeLords"/>
    <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>
    <HelperVariable Name="AvailableSteppesPlanets"/>
    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>$(AvailableSteppesPlanets) * 1 + $(TurnVariable) * 40</HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration25Unfallen" TechnologyStage="TechnologyStageDefinitionScienceAndExploration2" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage2Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration1To25'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyUnfallen" Inverted="false">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyColonization3Unfallen"/>
    <SimulationDescriptorReference Name="TechnologyExplorationModule1"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage2"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <SimulationDescriptorReference Name="TechnologyImproveExplorerHullUnfallens"/>
    <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>
    <HelperVariable Name="AvailableSteppesPlanets"/>
    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>$(AvailableSteppesPlanets) * 1 + $(TurnVariable) * 40</HelperFormula>
  </TechnologyDefinition>

  <!-- Add Innate T1 Cloaking for Explorers to Vaccuum Protection -->
  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration26" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingTimeLords</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityMappingUmbralChoir</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologySupportModule1"/>
    <SimulationDescriptorReference Name="TechnologySupportModule1Common"/>
    <SimulationDescriptorReference Name="TechnologyInnateExplorerCloaking"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>
    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>25 * $(TurnVariable)</HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration26TimeLords" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityTimeLords" Inverted="false">ClassEmpire,AffinityMappingTimeLords</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologySupportModule1"/>
    <SimulationDescriptorReference Name="TechnologySupportModule1TimeLords"/>
    <SimulationDescriptorReference Name="TechnologyInnateExplorerCloaking"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>
    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>35 * $(TurnVariable)</HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration26UmbralChoir" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityUmbralChoir" Inverted="false">ClassEmpire,AffinityMappingUmbralChoir</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologySupportModule1"/>
    <SimulationDescriptorReference Name="TechnologySupportModule1Common"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>
    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>25 * $(TurnVariable)</HelperFormula>
  </TechnologyDefinition>

  <!-- Shield Regen -->
  <TechnologyDefinition Name="TechnologyDefinitionCuriosityModuleSupportShieldRegenerate2Strategic6"  TechnologyStage="TechnologyStageDefinitionScienceAndExploration1"    Visibility="Hidden" >
    <PathPrerequisite Flags="DiplomaticTradable">false</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyCuriosityModuleSupportShieldRegenerate2Strategic6"/>
  </TechnologyDefinition>
</Datatable>