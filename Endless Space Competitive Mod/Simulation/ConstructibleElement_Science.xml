<?xml version="1.0" encoding="utf-8" ?>
<Datatable xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xsi:noNamespaceSchemaLocation="../Schemas/ScienceConstructibleElement.xsd">
  <!-- Not an actual tech, just a prerequisite for things that should be disabled -->
  <TechnologyDefinition Name="TechnologyDefinitionUnlockable" Category="CategoryTechnologyQuest" Visibility="Hidden">
    <CustomCost ResourceName="EmpireResearch">0</CustomCost>
    <PathPrerequisite Flags="DiplomaticTradable">false</PathPrerequisite>
  </TechnologyDefinition>
  <!-- Terraformation 1 -->
  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration9" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration5To9'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyColonization8"/>
    <SimulationDescriptorReference Name="TechnologyLinkColonization8Common"/>
    <SimulationDescriptorReference Name="TechnologyCuriosityLevel2"/>
    <SimulationDescriptorReference Name="TechnologyTerraformation1"/>
    <SimulationDescriptorReference Name="TechnologyTerraformation1TimeLords"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

    <HelperVariable Name="AvailableDesertPlanets"/>
    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>$(AvailableDesertPlanets) *  1.5+ $(TurnVariable) * 20</HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration9Unfallen" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration5To9'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyUnfallen" Inverted="false">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyColonization8Unfallen"/>
    <SimulationDescriptorReference Name="TechnologyCuriosityLevel2"/>
    <SimulationDescriptorReference Name="TechnologyTerraformation1"/>
    <SimulationDescriptorReference Name="TechnologyTerraformation1TimeLords"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

    <HelperVariable Name="AvailableDesertPlanets"/>
    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>$(AvailableDesertPlanets) *  1.5+ $(TurnVariable) * 20</HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration9TimeLords" TechnologyStage="TechnologyStageDefinitionScienceAndExploration3" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage3Multiplier) * (1 - (Property(StockLocation,@ClassEmpire/ClassResearch , TechnologyLinkReductionValue) * Count(StockLocation, @'ClassEmpire/ClassResearch,TechnologyLinkScienceAndExploration5To9'))) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyTimeLords" Inverted="false">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyTerraformation1TimeLords"/>
    <SimulationDescriptorReference Name="TechnologyTerraformation1"/>
    <SimulationDescriptorReference Name="TechnologyCuriosityLevel2"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage3"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventEcologistTechnology"/>

    <HelperVariable Name="AvailableMixedAnomaly"/>
    <HelperVariable Name="FoodPopulation"/>
    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>25 * $(TurnVariable) + 10 * $(FoodPopulation) + 10 * $(AvailableMixedAnomaly) </HelperFormula>
  </TechnologyDefinition>
  
  <!-- Terraformation 2 -->
  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration31TimeLords" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard,Faction,AffinityGameplayTechnologyTimeLords" Inverted="false">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyTerraformation2TimeLords"/>
    <SimulationDescriptorReference Name="TechnologyTerraformation2"/>
    <SimulationDescriptorReference Name="TechnologyScience6"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

    <HelperVariable Name="SciencePopulation"/>
    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>20 * $(TurnVariable) + $(SciencePopulation) * 10</HelperFormula>
  </TechnologyDefinition>

  <TechnologyDefinition Name="TechnologyDefinitionScienceAndExploration31" TechnologyStage="TechnologyStageDefinitionScienceAndExploration4" Category="CategoryTechnologyScienceAndExploration" ScoreProvider="TechnologyUnlocked">
    <CustomCost ResourceName="EmpireResearch">Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCurrentCost) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostStage4Multiplier) * Property(StockLocation,@'ClassEmpire/ClassResearch', TechnologyCostQuadrantScienceAndExplorationMultiplier)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,DiplomaticTradable,Discard" Inverted="true">ClassEmpire,AffinityGameplayTimeLords</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyTerraformation2"/>
    <SimulationDescriptorReference Name="TechnologyTerraformation2TimeLords"/>
    <SimulationDescriptorReference Name="TechnologyScience6"/>
    <SimulationDescriptorReference Name="TechnologyCountScienceAndExplorationIncreaseStage4"/>
    <SimulationDescriptorReference Name="TechnologyCounter"/>
    <PopulationEvent Name="PopulationPoliticalEventScientistTechnology"/>

    <HelperVariable Name="SciencePopulation"/>
    <HelperVariable Name="TurnVariable"/>
    <HelperFormula>20 * $(TurnVariable) + $(SciencePopulation) * 10</HelperFormula>
  </TechnologyDefinition>

  <!-- Shield Regen -->

  <TechnologyDefinition Name="TechnologyDefinitionCuriosityModuleSupportShieldRegenerate2Strategic6"  TechnologyStage="TechnologyStageDefinitionScienceAndExploration1"    Visibility="Hidden" >
    <PathPrerequisite Flags="DiplomaticTradable">false</PathPrerequisite>
    <SimulationDescriptorReference Name="TechnologyCuriosityModuleSupportShieldRegenerate2Strategic6"/>
  </TechnologyDefinition>
</Datatable>